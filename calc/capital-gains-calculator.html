<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/css/favicons/unnamed-180x180.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/css/favicons/unnamed-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/css/favicons/unnamed-32x32.png">
    <link rel="icon" type="image/png" sizes="180x180" href="/css/favicons/unnamed-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/css/favicons/unnamed-192x192.png">
    <link rel="icon" type="image/png" sizes="231x231" href="/css/favicons/unnamed-231x231.png">
    <title>Capital Gains Calculator | Pavlo Rospopa</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.5.5/css/simple-line-icons.min.css">

    <style>
        /* Pavlov Rospopa Website Styles */
        .site-header { background-color: #f8f9fa; border-bottom: 1px solid #dee2e6; padding: 1rem 0; }
        .wrap { max-width: 1400px; margin: 0 auto; padding: 0 15px; }
        .site-title { font-size: 1.5rem; font-weight: 600; color: #333; text-decoration: none; }
        .site-nav { float: right; }
        .page-content { padding: 2rem 0; }
        .calcheaderbtn { margin-bottom: 20px; display: flex; gap: 10px; }
        .subsection-heading { text-align: center; margin-bottom: 15px; font-weight: 700; text-transform: uppercase; color: #1f4e79; }
        .mtool { color: #1DA1F2; cursor: help; margin-right: 3px; }
        
        /* Dashed containers */
        .input-row-dashed {
            border: 1px dashed #1DA1F2;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 4px;
            background-color: #fdfdfd;
        }

        /* Comparison Sections */
        .subsection.revenue { background: #d4edda; padding: 15px; border-radius: 4px; }
        .subsection.expenses { background: rgb(240, 128, 128); padding: 15px; border-radius: 4px; }
        .minus-label { color: #dc3545; font-weight: bold; font-size: 0.7rem; text-transform: uppercase; margin-right: 5px; }

        /* Benefit Block */
        .benefit-box {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            padding: 40px 20px;
            text-align: center;
            margin-top: 30px;
        }
        .benefit-amount-container {
            border: 1px solid #dee2e6;
            background-color: #f8f9fa;
            padding: 10px 40px;
            border-radius: 5px;
            display: inline-block;
            margin-bottom: 15px;
        }
        .benefit-amount { color: #f0ad4e; font-size: 2.5rem; font-weight: 700; margin: 0; }
        
        .form-label { font-size: 0.85rem; font-weight: 600; color: #444; }
        .table-result-input { border: none !important; background: transparent !important; width: 100%; outline: none; text-align: right; font-weight: bold; }
    </style>
</head>

<body>
<header class="site-header">
    <div class="wrap">
        <a class="site-title" style="text-decoration: none;" href="https://rospopa.com">Pavlo Rospopa Website</a>
        <nav class="site-nav">
            <div class="trigger">
                <a style="text-decoration: none;" href="mailto:pavlo@rospopa.com?subject=APOD-Calculator">pavlo@rospopa.com</a>
            </div>
            <div class="trigger2">
                <a style="text-decoration: none;" href="mailto:pavlo@rospopa.com?subject=APOD-Calculator">@</a>
            </div>
        </nav>
    </div>
</header>

<main class="page-content">
    <div class="wrap" id="topdf">
        <div id="calculator">
            <h2 class="text-center mb-4" style="font-weight: 700;">CAPITAL GAINS CALCULATION</h2>
            
            <div class="calcheaderbtn">
                <button class="btn btn-secondary btn-sm" onclick="location.reload()"><span>RESET</span></button>
                <button class="btn btn-primary btn-sm"><span>PDF</span></button>
                <button class="btn btn-success btn-sm"><span>E-MAIL</span></button>
            </div>

            <div class="row">
                <!-- Section 1: Property Info -->
                <div class="col-lg-6">
                    <h4 class="subsection-heading">Property Info</h4>
                    <div class="input-row-dashed">
                        <div class="mb-3">
                            <label class="form-label">Original Price of Property (cost basis)</label>
                            <div class="input-group"><span class="input-group-text">$</span><input type="text" id="original_price" class="form-control money-input" placeholder="75,000"></div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Improvements to Property</label>
                            <div class="input-group"><span class="input-group-text">$</span><input type="text" id="improvements" class="form-control money-input" placeholder="25,000"></div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Selling Expenses</label>
                            <div class="input-group"><span class="input-group-text">$</span><input type="text" id="selling_expenses" class="form-control money-input" placeholder="35,000"></div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Sale Price of Property</label>
                            <div class="input-group"><span class="input-group-text">$</span><input type="text" id="sale_price" class="form-control money-input" placeholder="175,000"></div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label text-primary">Total Capital Gain</label>
                            <div class="input-group"><span class="input-group-text">$</span><input type="text" id="total_gain_display" class="form-control bg-light fw-bold" readonly placeholder="0"></div>
                        </div>
                        <div class="mb-0">
                            <label class="form-label">Accumulated Depreciation</label>
                            <div class="input-group"><span class="input-group-text">$</span><input type="text" id="accum_depreciation" class="form-control money-input" placeholder="133,350"></div>
                        </div>
                    </div>
                </div>

                <!-- Section 2: Tax Calculation -->
                <div class="col-lg-6">
                    <h4 class="subsection-heading">Tax Calculation</h4>
                    <div class="input-row-dashed">
                        <div class="mb-3">
                            <label class="form-label">Federal Capital Gains Tax (%)</label>
                            <div class="row g-2">
                                <div class="col-4">
                                    <select class="form-select" id="fed_rate" onchange="calculate()">
                                        <option value="20" selected>20</option><option value="15">15</option><option value="10">10</option>
                                    </select>
                                </div>
                                <div class="col-8">
                                    <div class="input-group"><span class="input-group-text">$</span><input type="text" id="tax_fed_val" class="form-control bg-light" readonly></div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Depreciation Recapture (%)</label>
                            <div class="row g-2">
                                <div class="col-4"><input type="text" class="form-control bg-light text-center" value="25" readonly></div>
                                <div class="col-8">
                                    <div class="input-group"><span class="input-group-text">$</span><input type="text" id="tax_recap_val" class="form-control bg-light" readonly></div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">State Tax (%)</label>
                            <div class="row g-2">
                                <div class="col-4"><input type="number" id="state_rate" class="form-control" value="5" oninput="calculate()"></div>
                                <div class="col-8">
                                    <div class="input-group"><span class="input-group-text">$</span><input type="text" id="tax_state_val" class="form-control bg-light" readonly></div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Net Investment Income Tax (%)</label>
                            <div class="row g-2">
                                <div class="col-4">
                                    <select class="form-select" id="niit_rate" onchange="calculate()">
                                        <option value="3.8" selected>3.8</option><option value="0">0</option>
                                    </select>
                                </div>
                                <div class="col-8">
                                    <div class="input-group"><span class="input-group-text">$</span><input type="text" id="tax_niit_val" class="form-control bg-light" readonly></div>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="mb-0">
                            <label class="form-label fw-bold">Total Tax Liability</label>
                            <div class="input-group"><span class="input-group-text">$</span><input type="text" id="total_tax_display" class="form-control bg-light fw-bold text-danger" readonly></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Comparison Tables -->
            <div class="row mt-4 g-4">
                <div class="col-lg-6">
                    <div class="subsection revenue">
                        <h4 class="subsection-heading" style="color:#155724">1031 Exchange</h4>
                        <table class="table table-bordered bg-white mb-0">
                            <tbody>
                                <tr><td>Sale Price of Property</td><td class="text-end" id="ex_sale_price">$0</td></tr>
                                <tr><td>Selling Expenses</td><td class="text-end"><div><span class="minus-label">MINUS $</span><span id="ex_sell_exp">0</span></div></td></tr>
                                <tr><td>Federal/State Taxes</td><td class="text-end"><div><span class="minus-label">MINUS $</span>0</div></td></tr>
                                <tr class="table-success"><td><strong>Total to Reinvest</strong></td><td class="text-end"><strong id="ex_total_val">$0</strong></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="subsection expenses">
                        <h4 class="subsection-heading" style="color:#721c24">Sell Without 1031 Exchange</h4>
                        <table class="table table-bordered bg-white mb-0">
                            <tbody>
                                <tr><td>Sale Price of Property</td><td class="text-end" id="sell_sale_price">$0</td></tr>
                                <tr><td>Selling Expenses</td><td class="text-end"><div><span class="minus-label">MINUS $</span><span id="sell_sell_exp">0</span></div></td></tr>
                                <tr><td>Total Tax Liability</td><td class="text-end"><div><span class="minus-label">MINUS $</span><span id="sell_tax_val">0</span></div></td></tr>
                                <tr class="table-danger"><td><strong>Total to Reinvest</strong></td><td class="text-end"><strong id="sell_total_val">$0</strong></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Benefit Section -->
            <div class="benefit-box">
                <h5 class="subsection-heading">Benefit of Exchanging vs. Selling</h5>
                <div class="benefit-amount-container">
                    <div class="d-flex align-items-center">
                        <span class="benefit-amount" style="margin-right: 5px;">$</span>
                        <h2 class="benefit-amount" id="benefit_display">0</h2>
                    </div>
                </div>
                <p class="text-muted small">of additional equity available to reinvest through a 1031 exchange</p>
                <button class="btn btn-primary mt-2 px-5 py-2 fw-bold" style="background-color: #5daaf0; border:none;">START AN EXCHANGE</button>
            </div>
        </div>
    </div>
	
 <section class="mt-4">
  <h5 class="font-monospace lh-1 text-center" style="font-size: 0.8rem; color: #666;">Disclaimer.<br>Use this calculator for REVIEW and TESTING purposes only.<br>(It's not a substitute for your calculations.)</h5>
 </section>
</main>

<footer class="site-footer">
    <div class="wrap">
        <div class="home">
            <p>Go to <a href="https://www.linkedin.com/in/prospopa/">LinkedIn</a>.</p>
            <p>Go to <a href="https://github.com/rospopa">GitHub</a>.</p>
            <p>Return to <a href="#top">Top of This Page</a>.</p>
            <section class="d-flex flex-row justify-content-center" style="width:100%;">
                <div class="container" style="margin:0; padding:20px 0; width:100%;">
                    <div class="text-center">
                        <p class="mb-0">Copyright Â© <span id="currentYear"></span> All Rights Reserved.</p>
                    </div>
                </div>
            </section>
        </div>
    </div>
</footer>

<script>
    function format(n) { return n.toLocaleString('en-US'); }
    function clean(s) { return parseFloat(s.toString().replace(/,/g, '')) || 0; }

    document.querySelectorAll('.money-input').forEach(el => {
        el.addEventListener('input', function() {
            let val = this.value.replace(/\D/g, "");
            if (val) this.value = parseInt(val).toLocaleString('en-US');
            calculate();
        });
    });

    function calculate() {
        const op = clean(document.getElementById('original_price').value);
        const imp = clean(document.getElementById('improvements').value);
        const se = clean(document.getElementById('selling_expenses').value);
        const sp = clean(document.getElementById('sale_price').value);
        const ad = clean(document.getElementById('accum_depreciation').value);

        // Logic from Accruit JS
        const tg = sp - (op + imp + se);
        document.getElementById('total_gain_display').value = format(tg);

        const fedRate = parseFloat(document.getElementById('fed_rate').value);
        const stateRate = parseFloat(document.getElementById('state_rate').value);
        const niitRate = parseFloat(document.getElementById('niit_rate').value);

        const taxFed = Math.round(Math.abs((tg * fedRate) / 100));
        const taxRecap = Math.round(Math.abs((ad * 25) / 100));
        const taxState = Math.round(Math.abs(((tg + ad) * stateRate) / 100));
        const taxNiit = Math.round(Math.abs(((tg + ad) * niitRate) / 100));
        const totalTax = taxFed + taxRecap + taxState + taxNiit;

        // Update Tax Fields
        document.getElementById('tax_fed_val').value = format(taxFed);
        document.getElementById('tax_recap_val').value = format(taxRecap);
        document.getElementById('tax_state_val').value = format(taxState);
        document.getElementById('tax_niit_val').value = format(taxNiit);
        document.getElementById('total_tax_display').value = format(totalTax);

        // Update Tables
        document.getElementById('ex_sale_price').textContent = '$' + format(sp);
        document.getElementById('ex_sell_exp').textContent = format(se);
        document.getElementById('ex_total_val').textContent = '$' + format(sp - se);

        document.getElementById('sell_sale_price').textContent = '$' + format(sp);
        document.getElementById('sell_sell_exp').textContent = format(se);
        document.getElementById('sell_tax_val').textContent = format(totalTax);
        document.getElementById('sell_total_val').textContent = '$' + format(sp - se - totalTax);

        document.getElementById('benefit_display').textContent = format(totalTax);
    }

    window.onload = calculate;
</script>
</body>
</html>