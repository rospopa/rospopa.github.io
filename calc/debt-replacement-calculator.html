<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/css/favicons/unnamed-180x180.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/css/favicons/unnamed-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/css/favicons/unnamed-32x32.png">
    <link rel="icon" type="image/png" sizes="180x180" href="/css/favicons/unnamed-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/css/favicons/unnamed-192x192.png">
    <link rel="icon" type="image/png" sizes="231x231" href="/css/favicons/unnamed-231x231.png">
    <title>Debt Replacement Calculator | Pavlo Rospopa</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+Inscriptional+Pahlavi&amp;display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.5.5/css/simple-line-icons.min.css">
    <link rel="stylesheet" href="/css/format.css">
    <link rel="stylesheet" href="/calc/css/calc.css">

</head>

<body>
<header class="site-header">
    <div class="wrap">
        <a class="site-title" style="text-decoration: none;" href="https://rospopa.com">Pavlo Rospopa Website</a>
        <nav class="site-nav">
            <div class="trigger">
                <a style="text-decoration: none;" href="mailto:pavlo@rospopa.com?subject=DR-Calculator">pavlo@rospopa.com</a>
            </div>
            <div class="trigger2">
                <a style="text-decoration: none;" href="mailto:pavlo@rospopa.com?subject=DR-Calculator">@</a>
            </div>
        </nav>
    </div>
</header>

<main class="page-content">
    <div class="align-self-start wrap" id="topdf">
        <div id="calculator">
            <div class="d-flex justify-content-center calcheaderbtn"><button class="btn btn-secondary btn-sm" id="resetAllfield" type="button"><span>RESET</span></button></div>
            <h2 class="text-center">DEBT REPLACEMENT CALCULATOR</h2>
            <div class="row" style="margin-right: -4.4px;margin-left: -4.4px;">
                <div class="col-lg-5" style="border: 1px dashed #1DA1F2;padding-left: 5px;padding-right: 5px;padding-bottom: 5px;">
                    <h4 class="subsection-heading">Relinquished Property</h4>
                    <div class="input-row-dashed">
                        <div class="mb-3"><label class="form-label">Net Sale Price</label>
                            <div class="input-group"><span class="input-group-text input-group-text">$</span><input class="form-control form-control money-input" type="text" id="rel_sale" placeholder="0.00"></div>
                        </div>
                        <div class="mb-3"><label class="form-label">Loan Payoff Amount</label>
                            <div class="input-group"><span class="input-group-text input-group-text">$</span><input class="form-control form-control money-input" type="text" id="rel_loan" placeholder="0.00"></div>
                        </div>
                        <div class="mb-3"><label class="form-label text-muted small">Funds to QI</label>
                            <div class="input-group"><span class="input-group-text input-group-text">$</span><input class="bg-light form-control form-control" type="text" id="rel_qi" placeholder="0.00" readonly=""></div>
                        </div>
                        <div class="mb-0"><label class="form-label text-muted small">Property LTV</label>
                            <div class="input-group"><input class="bg-light form-control form-control" type="text" id="rel_ltv" placeholder="0" readonly=""><span class="input-group-text input-group-text">%</span></div>
                        </div>
                    </div>
                    <h4 class="subsection-heading">Requirement</h4>
                    <div class="input-row-dashed"><label class="form-label">Total Reinvestment Target</label>
                        <div class="input-group"><span class="input-group-text input-group-text">$</span><input class="bg-light form-control form-control fw-bold" type="text" id="req_total" placeholder="0.00" readonly=""></div>
                    </div>
                </div>
                <div class="col-lg-7" style="border:1px dashed #1DA1F2;">
                    <h4 class="subsection-heading">Replacement Property(s)</h4>
                    <div class="input-row-dashed">
                        <div class="prop-label"><span>Property #1</span></div>
                        <div class="row g-2" style="border: 1px dashed #1DA1F2;margin-bottom: 25px;">
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">Cash $</span><input class="form-control form-control money-input" type="text" id="p1_funds" placeholder="0.00"></div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">LTV %</span><input class="form-control form-control" type="number" id="p1_ltv" placeholder="0"></div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">$</span><input class="bg-light form-control form-control" type="text" id="p1_loan" placeholder="Loan Assumed" readonly=""></div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">$</span><input class="bg-light form-control form-control" type="text" id="p1_total" placeholder="Total Requirement" readonly=""></div>
                            </div>
                        </div>
                        <div class="prop-label"><span>Property #2</span></div>
                        <div class="row mb-3 g-2" style="border: 1px dashed #1DA1F2;">
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">Cash $</span><input class="form-control form-control money-input" type="text" id="p2_funds" placeholder="0.00"></div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">LTV %</span><input class="form-control form-control" type="number" id="p2_ltv" placeholder="0"></div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">$</span><input class="bg-light form-control form-control" type="text" id="p2_loan" placeholder="Loan Assumed" readonly=""></div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">$</span><input class="bg-light form-control form-control" type="text" id="p2_total" placeholder="Total Requirement" readonly=""></div>
                            </div>
                        </div>
                        <div class="prop-label"><span>Property #3</span></div>
                        <div class="row g-2" style="border: 1px dashed #1DA1F2;">
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">Cash $</span><input class="form-control form-control money-input" type="text" id="p3_funds" placeholder="0.00"></div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">LTV %</span><input class="form-control form-control" type="number" id="p3_ltv" placeholder="0"></div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">$</span><input class="bg-light form-control form-control" type="text" id="p3_loan" placeholder="Loan Assumed" readonly=""></div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group input-group-sm"><span class="input-group-text input-group-text">$</span><input class="bg-light form-control form-control" type="text" id="p3_total" placeholder="Total Requirement" readonly=""></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-4 subsection summary">
                <table class="table table-bordered bg-white mb-0">
                    <tbody>
                        <tr>
                            <td class="fw-bold" style="padding-top: 4px;">Total Equity Replacement</td>
                            <td><input class="table-result-input" id="tot_equity" placeholder="$0.00" readonly="" style="padding-top:3px;padding-left:3px;"></td>
                        </tr>
                        <tr>
                            <td class="fw-bold" style="padding-top: 4px;">Total Debt Replacement</td>
                            <td><input class="table-result-input" id="tot_debt" placeholder="$0.00" readonly="" style="padding-top:3px;padding-left:3px;"></td>
                        </tr>
                        <tr class="table-primary" style="border-color: rgb(222,226,230);">
                            <td class="fw-bold" style="border-color: rgb(222,226,230);padding-top: 4px;">Total Exchange Value Acquired</td>
                            <td style="border-color: rgb(222,226,230);"><input class="table-result-input" id="tot_value" placeholder="$0.00" readonly="" style="padding-top:3px;padding-left:3px;"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="text-center mt-3 boot-result-box justify-center">
                <h5 class="text-uppercase fw-bold" style="color:#1f4e79;">Potential Amount Subject to Tax</h5>
                <div class="boot-amount"><span style="margin-right: 5px;font-size: 22px;">$</span><span id="boot_val" style="font-size: 32px;">0,00</span></div>
            </div>
        </div><!-- Start: DISCLAIMER -->
        <section class="ATTENTION-SECTION">
            <h5 class="font-monospace lh-1 text-center mx-2">Disclaimer.<br>Use this calculator for REVIEW and TESTING purposes only, we do not assume any responsibility for errors in calculations.<br><span> (It's not a substitute for your calculations.)</span></h5>
        </section><!-- End: DISCLAIMER -->
    </div>
</main>

<footer>
    <div class="wrap">
        <div class="home"><style>
            .home {padding-top:20px;}
            p {margin-bottom: 0;}
        </style>
            <p>Go to <a href="https://www.linkedin.com/in/prospopa/">LinkedIn</a>.</p>
            <p>Go to <a href="https://github.com/rospopa">GitHub</a>.</p>
            <p>Return to <a href="#top">Top of This Page</a>.</p>
            <section class="d-flex flex-row justify-content-center" style="width:100%;">
                <div class="container" style="margin-right:0px;margin-left:0px;padding-right:0px;padding-left:0px;width:100%;max-width:100%;">
                    <div class="row" style="margin-right:0px;margin-left:0px;max-width:100%;padding-top:20px;padding-bottom:20px;">
                        <div class="col" style="width:auto;padding-right:0px;padding-left:0px;max-width:100%;">
                            <div class="text-center" style="text-align:center;">
                                <p class="mb-0">Copyright&nbsp;Â©&nbsp;<span id="currentYear"></span> All Rights Reserved.</p>
                            </div><script>
                document.getElementById('currentYear').textContent = new Date().getFullYear();
            </script>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/calc/js/reset.js"></script>
<script>
    function format(n) { return n.toLocaleString('en-US'); }
    function clean(s) { return parseFloat(String(s).replace(/,/g, '')) || 0; }

    // Money masking & event listeners
    document.querySelectorAll('.money-input').forEach(el => {
        el.addEventListener('input', function() {
            let val = this.value.replace(/\D/g, "");
            if (val) this.value = parseInt(val).toLocaleString('en-US');
            calculate();
        });
    });

    document.querySelectorAll('input[type="number"]').forEach(el => {
        el.addEventListener('input', calculate);
    });

    function calculate() {
        // 1. Relinquished Data
        const relSale = clean(document.getElementById('rel_sale').value);
        const relLoan = clean(document.getElementById('rel_loan').value);
        
        // Net Equity (Funds to QI)
        const relQI = relSale - relLoan;
        
        // Loan to Value
        const relLTV = relSale > 0 ? (relLoan / relSale) * 100 : 0;

        document.getElementById('rel_qi').value = format(Math.max(0, relQI));
        document.getElementById('rel_ltv').value = relLTV.toFixed(0);
        document.getElementById('req_total').value = format(relSale);

        // 2. Replacement Properties Logic
        let totalEquity = 0;
        let totalDebt = 0;
        let totalValueAcquired = 0;

        for (let i = 1; i <= 3; i++) {
            const funds = clean(document.getElementById(`p${i}_funds`).value);
            const ltv = parseFloat(document.getElementById(`p${i}_ltv`).value) || 0;

            if (funds > 0) {
                // Formula: Total Value = Cash / (1 - LTV%)
                const propTotal = Math.round(funds / (1 - (ltv / 100)));
                const propLoan = propTotal - funds;
                
                document.getElementById(`p${i}_loan`).value = format(propLoan);
                document.getElementById(`p${i}_total`).value = format(propTotal);

                totalEquity += funds;
                totalDebt += propLoan;
                totalValueAcquired += propTotal;
            } else {
                document.getElementById(`p${i}_loan`).value = "";
                document.getElementById(`p${i}_total`).value = "";
            }
        }

        // 3. Summary Section
        document.getElementById('tot_equity').value = "$" + format(totalEquity);
        document.getElementById('tot_debt').value = "$" + format(Math.round(totalDebt));
        document.getElementById('tot_value').value = "$" + format(Math.round(totalValueAcquired));

        // 4. Boot Calculation (Accruit Logic)
        // Boot = (Target Price - Acquired Value) + (Target Equity - Invested Equity)
        // Each part cannot be less than 0 (no negative tax)
        
        let valueBoot = Math.max(0, relSale - totalValueAcquired);
        let equityBoot = Math.max(0, relQI - totalEquity);
        
        const totalBoot = Math.round(valueBoot + equityBoot);

        document.getElementById('boot_val').textContent = format(totalBoot);
    }
</script>
</body>
</html>















